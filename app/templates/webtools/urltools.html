{% extends 'base.html' %}

{% block meta %}
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta name="description" content=""/>
<meta name="author" content=""/>

{% block title %}
<title>MTP | Web App</title>
{% endblock %}

{% endblock %}

{% block header %}

<ol class="breadcrumb mb-4">
    {% if not current_user.is_anonymous %}
    <li>
        <a class="btn btn-primary btn-secondary" style="margin: 2px;" href="{{ url_for('blog.index') }}">Blog</a>
    </li>
    <li>
        <a class="btn btn-primary btn-primary" style="margin: 2px;" href="{{ url_for('budget.summary') }}">Summary</a>
    </li>
    <li>
        <a class="btn btn-primary btn-info" style="margin: 2px;" href="#">Reporting</a>
    </li>
    <li>
        <a class="btn btn-primary btn-success" style="margin: 2px;" href="{{ url_for('budget.add_expense_entry') }}">Add
            New
            Expense</a>
    </li>
    <li>
        <a class="btn btn-primary btn-success" style="margin: 2px;" href="{{ url_for('budget.add_revenue_entry') }}">Add
            Revenue</a>
    </li>
    <li>
        <a class="btn btn-primary btn-success" style="margin: 2px;" href="{{ url_for('budget.add_savings_entry') }}">Add
            Savings</a>
    </li>
    <li>
        <a class="btn btn-primary btn-success" style="margin: 2px;" href="{{ url_for('budget.add_utilities_entry') }}">Add
            Utilities</a>
    </li>
    <li>
        <a class="btn btn-primary btn-primary" style="margin: 2px;" href="{{ url_for('budget.validation') }}">See
            Validation</a>
    </li>
    <li>
        <a class="btn btn-primary btn-light" style="margin: 2px;" href="{# {{ url_for('dataflow.index') }} #}#">Data
            flow</a>
    </li>
    {% endif %}
</ol>
<h1 class="mt-4">URL Tool</h1>
{% endblock %}

{% block cards %}
<div class="row">
    {% with no_errors = get_flashed_messages(category_filter=["validated"]), errors = get_flashed_messages(category_filter=["error"]) %}
        {% if no_errors %}
        <div class="col-xl-3 col-md-6">
            <div class="card bg-success text-white mb-4">
                <div class="card-body">Validation success</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    {% for msg in no_errors %}
                    <p class="small text-white stretched-link">{{ msg }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% elif errors %}
        <div class="col-xl-3 col-md-6">
            <div class="card bg-danger text-white mb-4">
                <div class="card-body">Error messages</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    {% for msg in errors %}
                    <p class="small text-white stretched-link">{{ msg }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    {% endwith %}
</div>
{% endblock %}

{% block content %}
<div id="layoutAuthentication">
    <div id="layoutAuthentication_content">
        <main>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-5">
                        <div class="card shadow-lg border-0 rounded-lg mt-5">
                            <div class="card-header"><h3 class="text-center font-weight-light my-4">Decode/Encode
                                URL</h3>
                            </div>
                            <div class="card-body">
                                <form id="url-coder-form" action="{{ url_for('webtools.url_coder_parser') }}"
                                      method="post">
                                    {{ coder_form.hidden_tag() }}
                                    <div class="form-group">
                                        {{ coder_form.url_field.label(class='form-check-label') }}
                                        {{ coder_form.url_field(form='url-coder-form', class='form-control py-4') }}
                                    </div>
                                    <div class="form-check">
                                        {{ coder_form.encode(form='url-coder-form', class='small mb-1') }}
                                        {{ coder_form.encode.label(class='form-check-label') }}
                                    </div>
                                    <div class="form-check">
                                        {{ coder_form.decode(form='url-coder-form', class='small mb-1') }}
                                        {{ coder_form.decode.label(class='form-check-label') }}
                                    </div>
                                    <div class="form-group">
                                        {{ coder_form.select_encoding.label(form='url-coder-form',
                                        class='form-check-label') }}
                                        {{ coder_form.select_encoding(for="url-coder-form", class="form-select
                                        form-select-sm") }}
                                    </div>
                                    {{ coder_form.submit(form='url-coder-form', class='btn btn-primary') }}
                                    <a class="btn btn-danger"
                                       href="{{ url_for('webtools.url_coder_parser') }}">Cancel</a>
                                </form>
                                {% if result_url %}
                                <div class="form-group">
                                    <strong><label>Result URL</label></strong>
                                    <textarea class="form-control" rows="3">{{ result_url }}</textarea>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}